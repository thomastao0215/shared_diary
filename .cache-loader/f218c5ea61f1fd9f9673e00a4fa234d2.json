{"remainingRequest":"/Users/jiachen/projects/shared_diary/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/jiachen/projects/shared_diary/src/packages/back/utils.js","dependencies":[{"path":"/Users/jiachen/projects/shared_diary/src/packages/back/utils.js","mtime":1574666290467},{"path":"/Users/jiachen/projects/shared_diary/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiachen/projects/shared_diary/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["export function getDateStr(AddDayCount, dd = null) {\n  dd = dd || new Date();\n  dd.setDate(dd.getDate() + AddDayCount); // 获取AddDayCount天后的日期\n\n  var y = dd.getFullYear();\n  var m = dd.getMonth() + 1; // 获取当前月份的日期\n\n  var d = dd.getDate();\n  y = y > 9 ? '' + y : '0' + y;\n  m = m > 9 ? '' + m : '0' + m;\n  d = d > 9 ? '' + d : '0' + d;\n  return y + '-' + m + '-' + d;\n}\nexport function getWeekStr(AddDayCount, dd = null) {\n  dd = dd || new Date();\n  const s = '日一二三四五六'.charAt(dd.getDay() + AddDayCount);\n  return `星期${s}`;\n}\nexport function getTimeStr(dd) {\n  let h = dd.getHours();\n  let hh = h + 2;\n  h = h > 9 ? '' + h : '0' + h;\n  hh = hh > 9 ? '' + hh : '0' + hh;\n  return h + ':00-' + hh + ':00';\n}\n\nfunction checkTime() {\n  const now = new Date();\n  const h = now.getHours();\n  const m = now.getMinutes();\n\n  if (h > 16 || h === 16 && m > 30) {\n    return false;\n  }\n\n  if (h <= 7 || h === 7 && m < 30) {\n    return 8;\n  }\n\n  if (m < 30) {\n    return h + 1;\n  }\n\n  if (m > 30) {\n    return h + 2;\n  }\n}\n\nexport function checkSelectTime(day, sh) {\n  const now = new Date();\n  const h = now.getHours();\n  const m = now.getMinutes();\n  const s = Number(getDateStr(0).split('-').join(''));\n\n  if (day > s) {\n    return true;\n  }\n\n  if (sh === h && m > 30) {\n    return false;\n  }\n\n  if (sh === h + 1 && m > 30) {\n    return false;\n  }\n\n  if (sh < h) {\n    return false;\n  }\n\n  return true;\n}\nexport function getItems() {\n  const items = [];\n  let id = 0;\n  const minHours = 8;\n  const maxHours = 18;\n  ['今天', '明天', '后天'].forEach((text, index) => {\n    const dateStr = getDateStr(index);\n    const weekStr = getWeekStr(index);\n    const children = [];\n    let startHours = minHours;\n\n    if (text === '今天') {\n      const checkResult = checkTime();\n\n      if (!checkResult) {\n        return;\n      }\n\n      startHours = checkResult;\n    }\n\n    for (let i = startHours; i + 2 <= maxHours; i += 2) {\n      const ii = i + 2;\n      const is = i > 9 ? '' + i : '0' + i;\n      const iis = ii > 9 ? '' + ii : '0' + ii;\n      children.push({\n        text: `${i}:00-${ii}:00`,\n        id: id++,\n        dateStr,\n        weekStr,\n        timeStr: `${is}:00-${iis}:00`\n      });\n    }\n\n    items.push({\n      text,\n      children\n    });\n  });\n  return items;\n}",null]}