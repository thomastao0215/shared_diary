{"remainingRequest":"/Users/jiachen/projects/shared_diary/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/jiachen/projects/shared_diary/src/components/calendar/index.js","dependencies":[{"path":"/Users/jiachen/projects/shared_diary/src/components/calendar/index.js","mtime":1574666290462},{"path":"/Users/jiachen/projects/shared_diary/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiachen/projects/shared_diary/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { getNowDate, getDateStr } from './utils';\nComponent({\n  properties: {\n    currentYear: {\n      type: Number,\n      value: new Date().getFullYear()\n    },\n    currentMonth: {\n      type: Number,\n      value: new Date().getMonth() + 1\n    },\n    selectDate: {\n      type: String,\n      value: '',\n\n      observer(value) {\n        const y = Number(value.slice(0, 4));\n        const m = Number(value.slice(4, 6));\n        const d = Number(value.slice(6, 8));\n        this.setData({\n          y,\n          m,\n          d\n        });\n      }\n\n    }\n  },\n  data: {\n    y: 0,\n    m: 0,\n    d: 0,\n    allArr: [],\n    preMonthDateLen: 0,\n    currentMonthDateLen: 0\n  },\n\n  ready() {\n    this.getAllArr();\n    let today = getNowDate();\n    const ty = Number(today.slice(0, 4));\n    const tm = Number(today.slice(4, 6));\n    const td = Number(today.slice(6, 8));\n    this.setData({\n      ty,\n      tm,\n      td\n    });\n  },\n\n  methods: {\n    getDateLen(year, month) {\n      let actualMonth = month - 1;\n      let timeDistance = +new Date(year, month) - +new Date(year, actualMonth);\n      return timeDistance / (1000 * 60 * 60 * 24);\n    },\n\n    getFirstDateWeek(year, month) {\n      return new Date(year, month - 1, 1).getDay();\n    },\n\n    preMonth(year, month) {\n      if (month == 1) {\n        return {\n          year: --year,\n          month: 12\n        };\n      }\n\n      return {\n        year,\n        month: --month\n      };\n    },\n\n    nextMonth(year, month) {\n      if (month == 12) {\n        return {\n          year: ++year,\n          month: 1\n        };\n      }\n\n      return {\n        year,\n        month: ++month\n      };\n    },\n\n    getCurrentArr() {\n      let currentMonthDateLen = this.getDateLen(this.data.currentYear, this.data.currentMonth);\n      let currentMonthDateArr = [];\n\n      if (currentMonthDateLen > 0) {\n        for (let i = 1; i <= currentMonthDateLen; i++) {\n          currentMonthDateArr.push({\n            month: 'current',\n            date: i\n          });\n        }\n      }\n\n      this.setData({\n        currentMonthDateLen\n      });\n      return currentMonthDateArr;\n    },\n\n    getPreArr() {\n      let preMonthDateLen = this.getFirstDateWeek(this.data.currentYear, this.data.currentMonth);\n      let preMonthDateArr = [];\n\n      if (preMonthDateLen > 0) {\n        let {\n          year,\n          month\n        } = this.preMonth(this.data.currentYear, this.data.currentMonth);\n        let date = this.getDateLen(year, month);\n\n        for (let i = 0; i < preMonthDateLen; i++) {\n          preMonthDateArr.unshift({\n            month: 'pre',\n            date\n          });\n          date--;\n        }\n      }\n\n      this.setData({\n        preMonthDateLen\n      });\n      return preMonthDateArr;\n    },\n\n    getNextArr() {\n      let nextMonthDateLen = 42 - this.data.preMonthDateLen - this.data.currentMonthDateLen;\n      let nextMonthDateArr = [];\n\n      if (nextMonthDateLen > 0) {\n        for (let i = 1; i <= nextMonthDateLen; i++) {\n          nextMonthDateArr.push({\n            month: 'next',\n            date: i\n          });\n        }\n      }\n\n      return nextMonthDateArr;\n    },\n\n    getAllArr() {\n      let preArr = this.getPreArr();\n      let currentArr = this.getCurrentArr();\n      preArr = preArr.map(() => ''); // let nextArr = this.getNextArr()\n\n      let allArr = [...preArr, ...currentArr];\n      this.setData({\n        allArr\n      });\n    },\n\n    gotoPreMonth() {\n      const {\n        currentYear,\n        currentMonth,\n        ty,\n        tm\n      } = this.data;\n\n      if (ty > currentYear || ty == currentYear && tm >= currentMonth) {\n        return;\n      }\n\n      let {\n        year,\n        month\n      } = this.preMonth(currentYear, currentMonth);\n      this.setData({\n        currentYear: year,\n        currentMonth: month\n      });\n      this.getAllArr();\n    },\n\n    gotoNextMonth() {\n      let {\n        year,\n        month\n      } = this.nextMonth(this.data.currentYear, this.data.currentMonth);\n      this.setData({\n        currentYear: year,\n        currentMonth: month\n      });\n      this.getAllArr();\n    },\n\n    onClickItem(e) {\n      const {\n        day\n      } = e.currentTarget.dataset;\n      const {\n        currentYear,\n        currentMonth\n      } = this.data;\n      const s = getDateStr(currentYear, currentMonth, day);\n      const {\n        ty,\n        tm,\n        td\n      } = this.data;\n\n      if (ty > currentYear || ty == currentYear && tm > currentMonth || ty == currentYear && tm == currentMonth && td > day) {\n        return;\n      }\n\n      this.triggerEvent('click', s);\n    }\n\n  }\n});",null]}