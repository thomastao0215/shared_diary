{"remainingRequest":"/Users/jiachen/projects/shared_diary/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/jiachen/projects/shared_diary/src/pages/store/index.js","dependencies":[{"path":"/Users/jiachen/projects/shared_diary/src/pages/store/index.js","mtime":1574916534996},{"path":"/Users/jiachen/projects/shared_diary/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiachen/projects/shared_diary/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import { fetchData } from './api';\nPage({\n  data: {\n    banner: [{\n      image_url: \"https://yanxuan.nosdn.127.net/31da695c84cabd0eaff054265da29e5c.jpg?imageView&quality=75&thumbnail=750x0\"\n    }, {\n      image_url: \"https://yanxuan.nosdn.127.net/baea18aa59217cabd190b19fc1cf1617.jpg?imageView&quality=75&thumbnail=750x0\"\n    }, {\n      image_url: \"https://yanxuan.nosdn.127.net/d5683f01e132851229be21c52d808b62.jpg?imageView&quality=75&thumbnail=750x0\"\n    }, {\n      image_url: \"https://yanxuan.nosdn.127.net/af7d906e174cb160ab5a979310aa223d.jpg?imageView&quality=75&thumbnail=750x0\"\n    }],\n    tabs: [\"小香推荐💍\", \"稀释专区🎒\", \"约会🌹\", \"仙女🧚‍♀️\"],\n    tag: '',\n    tabs_id: ['5dde4b3bca0da80f4b2e5f40', '5dde4b66ca0da80f472e6368'],\n    products: [{\n      img_url: \"https://cloud-minapp-30262.cloud.ifanrusercontent.com/logo.png\",\n      title: \"香水\",\n      price: 100\n    }, {\n      img_url: \"https://cloud-minapp-30262.cloud.ifanrusercontent.com/1iZoGmxtyXMRAIzx.jpg\",\n      title: \"日式软沙发\",\n      price: 100\n    }, {\n      img_url: \"https://cloud-minapp-30262.cloud.ifanrusercontent.com/1iZoGmxtyXMRAIzx.jpg\",\n      title: \"日式软沙发\",\n      price: 100\n    }, {\n      img_url: \"https://cloud-minapp-30262.cloud.ifanrusercontent.com/logo.png\",\n      title: \"日式软沙发\",\n      price: 100\n    }, {\n      img_url: \"https://cloud-minapp-30262.cloud.ifanrusercontent.com/logo.png\",\n      title: \"香水\",\n      price: 100\n    }, {\n      img_url: \"https://cloud-minapp-30262.cloud.ifanrusercontent.com/1iZoGmxtyXMRAIzx.jpg\",\n      title: \"日式软沙发\",\n      price: 100\n    }, {\n      img_url: \"https://cloud-minapp-30262.cloud.ifanrusercontent.com/1iZoGmxtyXMRAIzx.jpg\",\n      title: \"日式软沙发\",\n      price: 100\n    }, {\n      img_url: \"https://cloud-minapp-30262.cloud.ifanrusercontent.com/logo.png\",\n      title: \"日式软沙发\",\n      price: 100\n    }]\n  },\n\n  onReachBottom() {\n    if (this.fetching || this.finished) {\n      return;\n    }\n\n    this.fetchJobs('loadmore');\n  },\n\n  onSearch(e) {\n    // console.log('搜索内容:' + e.detail)\n    this.query.keyWord = e.detail;\n    wx.showLoading({\n      title: '加载中'\n    });\n    this.query.offset = 0;\n    this.finished = false;\n    fetchData(this.query).then(res => {\n      console.log(res.data.objects);\n      this.setData({\n        positions: res.data.objects\n      });\n      wx.hideLoading();\n    });\n  },\n\n  init() {\n    this.fetching = false;\n    this.finished = false;\n    this.query = {\n      limit: 10,\n      offset: 0,\n      keyWord: '',\n      tag: this.data.tag\n    };\n    this.fetchJobs('fetch');\n  },\n\n  onPullDownRefresh() {\n    this.init();\n    wx.stopPullDownRefresh();\n  },\n\n  fetchJobs(type = 'fetch') {\n    if (type === 'fetch') {\n      this.query.offset = 0;\n      this.finished = false;\n    }\n\n    this.fetching = true;\n    type === 'fetch' && wx.showLoading({\n      title: '加载中...'\n    });\n    fetchData(this.query).then(res => {\n      let data = res.data.objects || [];\n\n      if (data.length < this.query.limit) {\n        this.finished = true;\n      } else {\n        this.query.offset = this.query.offset + this.query.limit;\n      }\n\n      const {\n        products\n      } = this.data;\n      const newProdcuts = type === 'fetch' ? [...data] : [...products, ...data];\n      this.fetching = false;\n      this.setData({\n        products: newProdcuts\n      });\n      type === 'fetch' && wx.hideLoading();\n    });\n  },\n\n  bindTabChange(e) {\n    var current = e.detail.index;\n    this.setData({\n      tag: this.data.tabs_id[current]\n    });\n  },\n\n  navToDetail(e) {\n    console.log(e);\n    wx.navigateTo({\n      url: '/packages/product/index'\n    });\n  },\n\n  cardSwiper(e) {\n    this.setData({\n      cardCur: e.detail.current\n    });\n  },\n\n  onLoad() {\n    this.init();\n  }\n\n});",null]}