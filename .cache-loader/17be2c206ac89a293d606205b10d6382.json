{"remainingRequest":"/Users/jiachen/projects/shared_diary/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/jiachen/projects/shared_diary/src/pages/entry/index.js","dependencies":[{"path":"/Users/jiachen/projects/shared_diary/src/pages/entry/index.js","mtime":1574677682151},{"path":"/Users/jiachen/projects/shared_diary/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jiachen/projects/shared_diary/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import zx from 'weapp-zx'; // import { getUserRole, changeUserRole } from 'utils/role'\n// 获取应用实例\n\nPage({\n  data: {\n    inited: false,\n    logo: 'https://cloud-minapp-30262.cloud.ifanrusercontent.com/logo.png'\n  },\n\n  onLoad(query = {}) {\n    const {\n      isSelected\n    } = query;\n    this.setData({\n      inited: true\n    });\n    let userInfo = wx.BaaS.storage.get('userinfo');\n\n    if (userInfo) {\n      // 授权\n      this.changeAndSwitchTab();\n    }\n  },\n\n  changeAndSwitchTab() {\n    wx.switchTab({\n      url: '/pages/my/index'\n    });\n  },\n\n  handleClickSeeker() {\n    zx.get('user', 'me').then(res => {\n      this.changeAndSwitchTab(2);\n    });\n  },\n\n  grant(data) {\n    let handleResult = Promise.resolve();\n    let userInfo = wx.BaaS.storage.get('userinfo');\n\n    if (!userInfo) {\n      // 授权\n      handleResult = zx.handleUserInfo(data);\n    }\n\n    handleResult.then(() => zx.get('user', 'me')).then(res => {\n      wx.BaaS.storage.set('userinfo', res.data);\n      this.changeAndSwitchTab();\n    });\n  },\n\n  handleSelectRecruiter() {\n    zx.get('user', 'me').then(res => {\n      if (!res.data.recruiter) {\n        wx.navigateTo({\n          url: '/pages/login/index'\n        });\n      } else {\n        this.changeAndSwitchTab(1);\n      }\n    });\n  }\n\n});",null]}